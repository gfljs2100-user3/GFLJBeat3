<!DOCTYPE html>
<html>
<head>
  <title>Bytebeat Library Manager</title>
</head>
<body>
  <h1>Bytebeat Library</h1>

  <select id="file-selector">
    <option value="big-js.json">Big JS</option>
    <option value="classic.json">Classic</option>
    <option value="compact-js.json">Compact JS</option>
    <option value="floatbeat.json">Floatbeat</option>
    <option value="funcbeat.json">Funcbeat</option>
    <option value="gfljs2100.json">GFLJS2100</option>
  </select>

  <ul id="library-list">
    <!-- Library folders will be displayed here -->
  </ul>

  <div id="folder-details">
    <!-- Folder details will be displayed here -->
  </div>

  <style>
    /* Same CSS as before */
  </style>

  <script>
    const fileSelector = document.getElementById('file-selector');
    const libraryList = document.getElementById('library-list');
    const folderDetails = document.getElementById('folder-details');

    // Event listener for dropdown menu change
    fileSelector.addEventListener('change', () => {
      const selectedFile = fileSelector.value;

      // Fetch the JSON file data
      fetch(`/get-json/${selectedFile}`)
        .then(response => response.json())
        .then(folders => {
          displayLibrary(folders);
        })
        .catch(error => console.error('Error fetching data:', error));
    });

    // Fetch library folders from the server
    fetch('./library')
      .then(response => response.json())
      .then(folders => {
        displayLibrary(folders);
      })
      .catch(error => console.error('Error fetching data:', error));

    // Display library folders in the HTML
    function displayLibrary(folders) {
      libraryList.innerHTML = ''; // Clear previous list
      folders.forEach(folder => {
        const listItem = document.createElement('li');
        listItem.textContent = folder;
        listItem.addEventListener('click', () => {
          // Fetch folder details (you'll need to implement this)
          fetch(`./${folder}`) 
            .then(response => response.json())
            .then(folderDetails => {
              displayFolderDetails(folderDetails);
            })
            .catch(error => console.error('Error fetching folder details:', error));
        });
        libraryList.appendChild(listItem);
      });
    }

    // Display details of a selected folder
    function displayFolderDetails(folder) {
      // Implement this to display the details from the fetched JSON
      folderDetails.innerHTML = `
        <h2>${folder.name}</h2>
        <p>Author: ${folder.author}</p>
        <p>Description: ${folder.description}</p>
        <p>Mode: ${folder.mode}</p>
        <p>Sample Rate: ${folder.sampleRate}</p>
        <p>Code: ${folder.codeOriginal}</p>
        <!-- Add other details as needed -->
      `;
    }
  </script>
</body>
</html>
