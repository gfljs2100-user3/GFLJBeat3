<!DOCTYPE html>
<html>
<head>
  <title>Bytebeat Library Manager</title>
  <style>
    /* Add your CSS here */
  </style>
</head>
<body>
  <h1>Bytebeat Library</h1>

  <select id="file-selector">
    <option value="big-js.json">Big JS</option>
    <option value="classic.json">Classic</option>
    <option value="compact-js.json">Compact JS</option>
    <option value="floatbeat.json">Floatbeat</option>
    <option value="funcbeat.json">Funcbeat</option>
    <option value="gfljs2100.json">GFLJS2100</option>
  </select>

  <div id="folder-details">
    <!-- Folder details will be displayed here -->
  </div>

  <script>
    const fileSelector = document.getElementById('file-selector');
    const folderDetails = document.getElementById('folder-details');

    // Event listener for dropdown menu change
    fileSelector.addEventListener('change', () => {
      const selectedFile = fileSelector.value;

      // Fetch the JSON file data
      fetch(`./library/${selectedFile}`)
        .then(response => response.json())
        .then(data => {
          displayFolderDetails(data); 
        })
        .catch(error => console.error('Error fetching data:', error));
    });

    // Fetch library folders from the server
    fetch('/get-library')
      .then(response => response.json())
      .then(folders => {
        // Assuming you only want to display the first folder
        if (folders.length > 0) {
          const firstFolder = folders[0];
          // Fetch folder details (you'll need to implement this)
          // fetch(`/get-folder-details/${firstFolder}`) 
          //   .then(response => response.json())
          //   .then(folderDetails => {
          //     displayFolderDetails(folderDetails);
          //   })
          //   .catch(error => console.error('Error fetching folder details:', error));
        }
      })
      .catch(error => console.error('Error fetching data:', error));

    // Display details of a selected folder
    function displayFolderDetails(folder) {
      // Implement this to display the details from the fetched JSON
      folderDetails.innerHTML = `
        <h2>${folder.name}</h2>
        <p>Author: ${folder.author}</p>
        <p>Description: ${folder.description}</p>
        <p>Mode: ${folder.mode}</p>
        <p>Sample Rate: ${folder.sampleRate}</p>
        <p>Code: ${folder.codeOriginal}</p>
        <!-- Add other details as needed -->
      `;
    }
  </script>
</body>
</html>
